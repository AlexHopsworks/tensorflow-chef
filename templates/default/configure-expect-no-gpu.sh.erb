#!/usr/bin/expect

spawn "./configure"
expect '/usr/bin/python]: '
send "\r"
# Please specify optimization flags to use during compilation when bazel option "--config=opt" is specified [Default is -march=native]
expect '] '
send "\r"
# Do you wish to use jemalloc as the malloc implementation? [Y/n] Y
expect 'n] '
send "y\r"
# Do you wish to build TensorFlow with Google Cloud Platform support? [y/N] 
expect "Do you wish to build TensorFlow with Google Cloud Platform*"
send "\r"
# Do you wish to build TensorFlow with Hadoop File System support? [y/N] y
expect "Do you wish to build TensorFlow with Hadoop File System*"
send "y\r"
# Do you wish to build TensorFlow with the XLA just-in-time compiler (experimental)? [y/N] N
expect "Do you wish to build TensorFlow with the XLA*"
send "N\r"
# Found possible Python library paths:
#  /usr/local/lib/python2.7/dist-packages
#  /usr/lib/python2.7/dist-packages
# Please input the desired Python library path to use.  Default is [/usr/local/lib/python2.7/dist-packages]
expect "]*"
send "\r"
# Do you wish to build TensorFlow with OpenCL support? [y/N] n
expect "]*"
send "N\r"
#  Do you wish to build TensorFlow with CUDA support? [y/N]
expect "]*"
send "N\r"
expect eof
